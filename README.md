# pike-libsass
A Pike module wrapper for libsass.

## NOTE! This module will be discontinued in this repository 

Very soon this module will be part of official Pike. It is already included in
the devel branch of [Pike](https://github.com/pikelang/Pike/tree/8.1/src/post_modules/_Sass). In the official Pike the module will be located in the 
the `Web` module, so it will be available via `Web.Sass`. 

## How to install

 * `git clone https://github.com/poppa/pike-libsass.git`

 * `cd pike-libsass`

 * `pike -x module` to compile the module. The first time this will fail since `libsass` isn't built yet, but we need the `Makefile`, which is generated by `pike -x module`, for that.

 * Now run `make libsass`. This will build `libsass` and install it as a shared library and symlink `/usr/local/lib/libsass.so -> /usr/lib/libsass.so`.
   **NOTE!** At the moment there's no test for if `/usr/lib/libsass.so` already exist or not. So if you have it installed already it will be overwritten.

 * If all is well so far you can now run `pike -x module`.

 * If that all went well you can now install the module: `sudo pike -x module install`

There are some helper scripts here that are useful:

 * `./m` will run `pike -x module`

 * `./mi` will run `pike -x module && sudo pike -x module install`

**NOTE!** This make/install stuff is just an interim solution to be able to build `libsass` from source. The final solution will be fully integrated with the Pike build steps.


## How to use

It's pretty straight forward to use:

```pike
import Tools.Sass;

Compiler compiler = Compiler();

// Allow imports over HTTP. HTTP_IMPORT_GREEDY will raise an error if the
// content type of the imported file isn't text/scss or text/sass.
compiler->http_import = HTTP_IMPORT_GREEDY;

compiler->set_options(([
  "output_style"    : STYLE_COMPRESSED,  // Minifies the output
  "source_map_file" : "my.source.map"    // Will write a source.map file
]));

// Compile my.scss to my.css. my.source.map will also be written.
if (mixed e = catch(compiler->compile_file("my.scss", "my.css"))) {
  werror("Compilation failed: %s\n", describe_error(e));
}
```

And that's that for now.
